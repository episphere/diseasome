<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Diseasome</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <!-- bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.3/pako.min.js'></script>-->
    <!-- font awesome -->
    <script src="https://kit.fontawesome.com/31149d48b0.js" crossorigin="anonymous"></script>
</head>

<body>
    <!-- top banner -->
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark ">
        <div id="mySidepanel" class="sidepanel">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
            <a class="nav-link" href="#calculator">Calculator</a>
            <a class="nav-link" href="#notices">Notices</a>
        </div>

        <div class="navbar-header">
            <button class=" btn btn-dark" onclick="openNav()">☰ </button>
            <script>
                function openNav() {
                    document.getElementById("mySidepanel").style.width = "250px";
                }

                function closeNav() {
                    document.getElementById("mySidepanel").style.width = "0";
                }
            </script>
        </div>
        <div>

            <ul class="nav navbar-nav navbar-right">
                <li class="nav-item active">
                    <a class="nav-link" target="_blank" href="https://github.com/episphere/diseasome">Github
                        Code</a>
                </li>
                <li class="nav-item active"><a class="nav-link" target="_blank"
                        href="https://observablehq.com/@lorenasandoval88/riskome" target="_blank">Notebook</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" target="_blank" href="https://gitter.im/episphere/PRS">Discussion</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" target="_blank" href="">
                        <img style="vertical-align:top" src="youtube_img.png" width="25" height="25"></img> Tutorial</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- side panel ----------------------------------------------->
    <section class="bgimage" id="home">
        <div class="container-fluid">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 hero-text">
                <h2 class="hero_title">Diseasome</h2>
                <p class="hero_desc">Calculation of multiple <br> (<a href="https://www.nature.com/articles/nrg.2016.27"
                        target="_blank">risk profiles</a>) for
                    23andme
                    reports, using the <a href='https://www.pgscatalog.org' target="_blank">PGS Catalog</a>.</p>
            </div>
        </div>

    </section>

    <!-- pgs scoring counts bar plot ----------------------------->
    <h5>PGS catalog Traits</h5>
    <div class="spinner-border m-5" role="status" id="spinner">
        <span class="visually-hidden">Loading...</span>
    </div>

    <div id="pgsBar"></div>


    <!--  input to select pgs trait ------------------------------>
    <form>
        <h5>Select trait of interest</h5>
        <select id="myTrait2">
            <option>--Selelct trait from dropdown--</option>
        </select>
    </form>
    <br>

    <!--  input to select variant number --------------------------->
    <form>
        <h5>Select max number of variants in scoring files</h5>
        <select id="myNum">
            <option>--Selelct variant limit from dropdown--</option>
            <option> 50</option>
            <option> 100 </option>
            <option> 500 </option>
            <option> 1000 </option>
        </select>
    </form>
    <br>

    <!--  run calc for scores --------------------------->
    <div id="pgsDiv"></div>

    <!-- calc section----------------------------------------------->
        <div id="calcDiv">
        
        </div>

    <script src="app/calc.js"></script>

    <script type="module" src="input2.js"></script>
    <script type="module" src="./input.js"></script>
    <script type="module" src="sdk/allTraits.js"></script>
    <script type="module" src="sdk/oneTrait.js"></script>
    <script type="module" src="main.js"></script>
    <script type="module" src="dependencies.js"></script>
    <script type="module" src="pgs.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/3.3.0/math.min.js"></script>


    <!-- privacy section-->
    <section id="notices">
        <span style="font-size:large;">Privacy:</span><br>
        <span style="font-size:small;color:black;font-weight:normal">
            All data and calculations take place in the browser. No data or calculations circulate by a server. This
            application is, foremost, an exercise in privacy-preserving biomedical informatics for consumer genomics
            data.
        </span><br>
        <span style="font-size:large;">Scope/Limitations:</span><br>
        <span style="font-size:small;color:black;font-weight:normal">
            This calculator was devised as an implementation proof of concept. It has a number of important
            limitations
            for epidemiology research and it does not meet criteria for clinical use. The current tool uses
            pre-imputation genotype data and thus results in a low number of SNP matches. Most important, only the
            relative risk model <a href='https://www.nature.com/articles/nrg.2016.27#Sec5' target="_blank">(Box 1,
                eq
                2)</a> is calculated, with no effort to determine absolute risk of disease. Finally, the risk
            calculation will only be attempted for PGS catalog entries reporting effects as beta values under
            "effect_weight".</span>
    </section>


</body>